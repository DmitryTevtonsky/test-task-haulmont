{"version":3,"sources":["core/components/list/index.module.css","api/index.ts","core/components/dropdown/index.tsx","core/components/list/index.tsx","core/page/index.tsx","core/utils/filters.ts","index.tsx","core/page/index.module.css","core/components/dropdown/index.module.css"],"names":["module","exports","error","getPreparedData","a","fetch","response","ok","json","data","launches","map","links","mission_name","launch_date_local","details","upcoming","launch_site","rocket","flight_number","mission_patch_small","site_id","site_name","site_name_long","rocket_id","rocket_name","rockets","Set","launchSites","memo","title","options","filterCallback","selectElement","useRef","className","css","drowdown","drowdownTitle","ref","drowdownSelect","onChange","current","value","selectedIndex","key","option","list","item","alt","itemImage","src","itemInfo","itemHeader","itemTitle","itemExtra","Date","toLocaleDateString","itemDescription","useState","setData","filteredData","setFilteredData","rocketFilter","setRocketFilter","launchSiteFilter","setLaunchSiteFilter","useEffect","then","prepairedData","filter","filterByLaunchSites","useCallback","filterByRockets","section","header","filters","main","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e06e20f1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"list_list__g4iNX\",\"item\":\"list_item__3GstH\",\"itemImage\":\"list_itemImage__3qOsL\",\"itemInfo\":\"list_itemInfo__11sCD\",\"itemHeader\":\"list_itemHeader__3cHOm\",\"itemTitle\":\"list_itemTitle__1AMoG\",\"itemExtra\":\"list_itemExtra__3fMhe\",\"itemDescription\":\"list_itemDescription__3Ulku\"};","import { Launch, PreparedData } from \"./types\";\n\nconst error = \"Error occured while fetching data!\";\n\nexport const getPreparedData = async (): Promise<PreparedData> => {\n  try {\n    const response = await fetch(\"https://api.spacexdata.com/v3/launches\");\n\n    if (response.ok) {\n      /**\n       * Полностью данные нет смысла типизировать,\n       * поэтому из начальных данных беру нужное и типизирую.\n       */\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const data: any[] = await response.json();\n\n      const launches: Launch[] = data.map(\n        ({\n          links,\n          mission_name,\n          launch_date_local,\n          details,\n          upcoming,\n          launch_site,\n          rocket,\n          flight_number,\n        }) => ({\n          flight_number,\n          mission_patch_small: links.mission_patch_small,\n          mission_name,\n          launch_date_local,\n          details,\n          upcoming,\n          launch_site: {\n            site_id: launch_site.site_id,\n            site_name: launch_site.site_name,\n            site_name_long: launch_site.site_name_long,\n          },\n          rocket: {\n            rocket_id: rocket.rocket_id,\n            rocket_name: rocket.rocket_name,\n          },\n        })\n      );\n\n      // С помощью Set оставляю только уникальные значения для фильтров\n      const rockets = [\n        ...new Set(launches.map(({ rocket }) => rocket.rocket_name)),\n      ];\n\n      const launchSites = [\n        ...new Set(\n          launches.map(({ launch_site }) => launch_site.site_name_long)\n        ),\n      ];\n\n      return {\n        launches,\n        rockets,\n        launchSites,\n      };\n    }\n    return { launches: [], rockets: [], launchSites: [], error };\n  } catch (err) {\n    return { launches: [], rockets: [], launchSites: [], error };\n  }\n};\n","/* eslint-disable jsx-a11y/no-onchange */\nimport React, { FC, memo, useRef } from \"react\";\n\nimport css from \"./index.module.css\";\n\ninterface DropdownProps {\n  title: string;\n  options: string[];\n  filterCallback: (value: string) => void;\n}\nconst Dropdown: FC<DropdownProps> = ({\n  title,\n  options,\n  filterCallback,\n}: DropdownProps) => {\n  const selectElement = useRef<HTMLSelectElement>(null);\n\n  const handleOnSelect = () => {\n    if (selectElement?.current) {\n      const { value } =\n        selectElement.current.options[selectElement.current.selectedIndex];\n      filterCallback(value);\n    }\n  };\n\n  return (\n    <div className={css.drowdown}>\n      <h3 className={css.drowdownTitle}>{title}</h3>\n      <select\n        ref={selectElement}\n        className={css.drowdownSelect}\n        onChange={handleOnSelect}\n      >\n        {\n          // Хотел не указывать value для дефолтного option,\n          // но если не указать, то value становится равным \"Все варианты\".\n          // Поэтому решил добавить value=\"reset\" и далее работать с ним.\n        }\n        <option key=\"all\" value=\"reset\">\n          All\n        </option>\n        {options.map((option) => (\n          <option key={option} value={option}>\n            {option}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\n/**\n * Memo для избегания ненужных перерендеров.\n * Таким образом Dropdown рендерится только 1 раз.\n */\nexport default memo(Dropdown);\n","import { Launch } from \"api/types\";\nimport React, { FC, memo } from \"react\";\n\nimport css from \"./index.module.css\";\n\n/**\n * Можно было бы еще поразбивать на компоненты и их мемоизировать,\n * но для тестового это уже перебор наверное.\n */\ninterface ListProps {\n  data: Launch[];\n}\n\nconst List: FC<ListProps> = ({ data }: ListProps) => {\n  return (\n    <ul className={css.list}>\n      {data?.map(\n        ({\n          flight_number,\n          mission_patch_small,\n          mission_name,\n          launch_date_local,\n          details,\n          upcoming,\n        }) => (\n          <li\n            /**\n             * Думал, что flight_number можно использовать как ID, но есть дубли.\n             * Поэтому сделал составной key.\n             */\n            key={`${flight_number}-${launch_date_local}`}\n            className={css.item}\n          >\n            <img\n              alt={`Mission patch \"${mission_name}\"`}\n              className={css.itemImage}\n              src={mission_patch_small}\n            />\n            <div className={css.itemInfo}>\n              <div className={css.itemHeader}>\n                <h3 className={css.itemTitle}>{mission_name}</h3>\n                <h3 className={css.itemExtra}>\n                  {new Date(launch_date_local).toLocaleDateString()}\n                </h3>\n              </div>\n              <div className={css.itemDescription}>\n                {upcoming ? \"Upcoming\" : details}\n              </div>\n            </div>\n          </li>\n        )\n      )}\n    </ul>\n  );\n};\n\nexport default memo(List);\n","import { Launch, PreparedData } from \"api/types\";\nimport { getPreparedData } from \"api\";\nimport React, { FC, memo, useCallback, useEffect, useState } from \"react\";\n\nimport { Dropdown, List } from \"../components\";\nimport { filter } from \"../utils/filters\";\n\nimport css from \"./index.module.css\";\n\nconst Core: FC = () => {\n  const [data, setData] = useState<PreparedData>();\n  const [filteredData, setFilteredData] = useState<Launch[] | null>();\n  const [rocketFilter, setRocketFilter] = useState<string | null>(null);\n  const [launchSiteFilter, setLaunchSiteFilter] = useState<string | null>(null);\n\n  useEffect(() => {\n    getPreparedData().then((prepairedData) => setData(prepairedData));\n  }, []);\n\n  useEffect(() => {\n    data?.launches &&\n      setFilteredData(\n        filter({\n          launches: data.launches,\n          rocketFilter,\n          launchSiteFilter,\n        })\n      );\n  }, [data, rocketFilter, launchSiteFilter]);\n\n  const filterByLaunchSites = useCallback(\n    (value: string) => setLaunchSiteFilter(value === \"reset\" ? null : value),\n    []\n  );\n\n  const filterByRockets = useCallback(\n    (value: string) => setRocketFilter(value === \"reset\" ? null : value),\n    []\n  );\n\n  return (\n    <section className={css.section}>\n      <header className={css.header}>\n        <h1 className={css.title}>Launches</h1>\n        <div className={css.filters}>\n          <Dropdown\n            filterCallback={filterByLaunchSites}\n            options={data?.launchSites || []}\n            title=\"Launch Site\"\n          />\n          <Dropdown\n            filterCallback={filterByRockets}\n            options={data?.rockets || []}\n            title=\"Rocket\"\n          />\n        </div>\n      </header>\n      <main className={css.main}>\n        {!data?.error ? (\n          <List data={filteredData || data?.launches || []} />\n        ) : (\n          data?.error\n        )}\n      </main>\n    </section>\n  );\n};\n\nexport default memo(Core);\n","import { Launch } from \"api/types\";\n\ninterface FilterParams {\n  launches: Launch[];\n  rocketFilter: string | null;\n  launchSiteFilter: string | null;\n}\nexport const filter = ({\n  launches,\n  rocketFilter,\n  launchSiteFilter,\n}: FilterParams): Launch[] => {\n  /**\n   * Вынес отдельно функцию фильтрации.\n   * Кажется, что можно что-то еще отрефачить, но уже глаз замылен)\n   */\n  if (rocketFilter && !launchSiteFilter) {\n    return launches.filter(({ rocket }) => rocket.rocket_name === rocketFilter);\n  }\n  if (!rocketFilter && launchSiteFilter) {\n    return launches.filter(\n      ({ launch_site }) => launch_site.site_name_long === launchSiteFilter\n    );\n  }\n  if (rocketFilter && launchSiteFilter) {\n    return launches.filter(\n      ({ launch_site, rocket }) =>\n        launch_site.site_name_long === launchSiteFilter &&\n        rocket.rocket_name === rocketFilter\n    );\n  }\n  return launches;\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { Core } from \"./core\";\n\nReactDOM.render(<Core />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"page_section__3mnnr\",\"header\":\"page_header__2YIHk\",\"title\":\"page_title__3bjWq\",\"filters\":\"page_filters__18WrK\",\"main\":\"page_main__1mfyu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"drowdown\":\"dropdown_drowdown__jDYrs\",\"drowdownTitle\":\"dropdown_drowdownTitle__14lAm\",\"drowdownSelect\":\"dropdown_drowdownSelect__1uNF8\"};"],"sourceRoot":""}